<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Fluid Dynamics Simulator</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Add favicon to prevent 404 -->
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <!-- Load THREE.js first -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Then load OrbitControls -->
    <script src="js/orbitcontrols.js"></script>
    <!-- Finally load other libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.7/dat.gui.min.js"></script>
</head>
<body>
    <div class="app-container">
        <header>
            <h1>3D Fluid Dynamics Simulator</h1>
            <p>Velocity Potential-Based Ideal Fluid Simulation</p>
        </header>

        <div class="content">
            <div class="control-panel">
                <h2>Simulation Controls</h2>
                
                <div class="control-group">
                    <label for="velocity">Free Stream Velocity</label>
                    <input type="range" id="velocity" min="0.1" max="10" step="0.1" value="1.0">
                    <span id="velocity-value">1.0</span>
                </div>
                
                <div class="control-group">
                    <label for="particles">Particle Count</label>
                    <input type="range" id="particles" min="100" max="30000" step="100" value="5000">
                    <span id="particles-value">1000</span>
                </div>
                
                <div class="control-group">
                    <label for="density">Fluid Density</label>
                    <input type="range" id="density" min="0.5" max="2" step="0.1" value="1.0">
                    <span id="density-value">1.0</span>
                </div>
                
                <div class="control-group">
                    <label>Object Type</label>
                    <div class="button-group">
                        <button id="sphere-btn" class="active">Sphere</button>
                        <button id="cylinder-btn">Cylinder</button>
                        <button id="airfoil-btn">Airfoil</button>
                    </div>
                </div>
                
                <button id="toggle-simulation" class="primary-btn">Start Simulation</button>
                
                <div class="info-box">
                    <h3>Backend Information</h3>
                    <p>Calculations are powered by JavaScript with a fallback to WebAssembly.</p>
                    <p>Velocity potential equation: φ = U∞x + (potential based on object)</p>
                    <p>Visualization powered by Three.js</p>
                </div>
            </div>
            
            <div id="simulation-container"></div>
        </div>
        
        <footer>
            <p>Fluid Dynamics Simulator &copy; 2025</p>
        </footer>
    </div>
    
    <!-- Load the WASM support file -->
    <script src="js/wasm_exec.js"></script>
    <!-- Load the main application script -->
    <script src="js/main.js"></script>
    <!-- Load the main fields script -->
    <script src="js/field-visualization.js"></script>
    <!-- Load the main fields script -->
    <script src="js/fix-tunnel.js"></script>
    <script src="js/visualization-updates.js"></script>
</body>
</html>